<!DOCTYPE html>
<html lang="en">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>个人资料</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
		<link rel="stylesheet" type="text/css" href="css/daohang.css"/>
	</head>

	
	<body>



	<div th:replace="head :: html"></div>
			<!--中间内容-->
		<div class="g-body">
		<div class="g-paded-large g-container">
				<div class="ui container">
						<div class="ui stackable grid">
							
							<!--左边-->
			<div class="three wide column">
				
				<div class="ui  teal attached segments">
					<div class="ui segment">
								<a href="#" class="g-blak g-text-thin">个人资料</a>
								
							</div>
							<div class="ui segment">
								<a href="../blogget"  class="g-blak g-text-thin">我的博客</a>
								
							</div>
							<div class="ui segment">
								<a href="#"  class="g-blak g-text-thin">我的问答</a>
								
							</div>
							<div class="ui segment">
								<a href="stars.html"  class="g-blak g-text-thin">我关注的对象</a>
								
							</div>
							<div class="ui segment">
								<a href="#"  class="g-blak g-text-thin">我的粉丝</a>
								
							</div>
				</div>
				
				
			</div>
			<!--右边-->
			<div class="thirteen wide  column">
							<!--头部-->
				<div class="ui teal  attached segment">
					<div class="ui two column grid">
						<div class="column">
							<h2 class="ui header">个人资料</h2>
							
						</div>
						
		
					</div>
				
				</div>
					<!--个人资料内容-->
					<div class="ui attached segment">
									<div class="ui padded vertical segment g-paded-large">

							<div class="ui  stackable  grid">
								
									<div class="five wide column center aligned">
									<a href="#" target="_blank">
										<img  th:src="@{/upload/{img}(img=${session.user.getUheadimg()})}" alt=""  style="width: 200px; height: 150px;" class="ui container"/>
									</a>
									<div class="content"><a href="#"  class="header myhead">更改头像</a></div>
									
									
								</div>
								
								
								
								<div class="eleven wide column">
									<div class="ui padded vertical segment g-paded-large"> 
							
							
							<div class="ui two column grid">
								<div class="column">
									<p class="g-gray">ID：<label th:text="${session.user.getUusername()}"></label></p>
								</div>
								<div class="right aligned column">
									<div class="content"><a th:href="@{youindex/{uid}(uid=${session.user.getUid()})}" class="header">个人主页></a></div>
								</div>
							</div>

									<p class="g-text">关注：<label th:text="${myFans}"></label>  &nbsp;&nbsp; 粉丝: <label th:text="${myFollow}"></label> </p>

									</div>
									<div class="ui padded vertical segment g-paded-large"> 
									<div class="ui grid">
										<div class="thirteen wide column">
												
										<p>昵称：<label th:text="${session.user.getUnickname()}"></label></p>
										<p>实名：<label th:text="${session.user.getUname()}"></label></p>
											<p>性别：<label th:text="${session.user.getUsix()}"></label></p>
										<p>生日：<label th:text="${session.user.getUbirthday()}"></label></p>
									
										<p>地区：<label th:text="${session.user.getUlocation()}"></label></p>
										<p>职位：<label th:text="${session.user.getUposition()}"></label></p>
										<p>简介：<label th:text="${session.user.getUsoon()}"></label></p>
																				
									
										</div>
										
										<div class="three wide column">
											
										<div class="content"><a href="#" class="header res">修改资料</a></div>
										</div>
										
									</div>
								
									</div>
									
									
									
								</div>
							
								
							</div>
									
						</div>
						
					</div>
				
				
			</div>
			
			
			
				</div>	
				</div>
		</div>
		</div>


	<div th:replace="botton :: html"></div>


				<!--修改信息-->
					<div class="ui res1 mini basic modal">
         <div class="header">修改资料</div>
        <div class="content">
        	<p><div class="ui input g-white">
  昵称：<input type="text" name="unickname" th:value="${session.user.getUnickname()}" >
     </div></p>
        	
        	<p><div class="ui input g-white">
  实名：<input type="text" name="uname" th:value="${session.user.getUname()}">
</div></p>

<p>
        
    性别：<select class="ui mini dropdown" name="usix" th:value="${session.user.getUsix()}">
  <option value="1">男</option>
  <option value="0">女</option>
</select>
 
  </div>
</div>
	<!--更换头像-->
	<div class="ui myhead1 modal" style="height: 350px; width: 700px;">
		<h3 class="header">上传头像</h3>
		<form action="../douser/gfile" method="post" class="ui  form" enctype="multipart/form-data">
		<div class="content">

			<div class="head-img" style="text-align: center;">
				<button type="button"><img src="img/66.PNG" id="my-img"></button>
				<input type="file"  style="display: none" id="img-upload" name="file"/>
			</div>
			<br /><br />
			<p>
				&nbsp;&nbsp;	<label id="tishi"></label>

			</p>



			<p>
				&nbsp;&nbsp;	<button class="qux1 ui mini teal basic button" type="button">取消</button>
				<button class="ui  button" id="sc1" style="display: none"></button>

			</p>

		</div>
		</form>
	</div>

	<!--头像预览-->
	<div class="ui myhead2 mini modal">
		<h3 class="header">修改头像</h3>
		<div class="content">
			<div class="ui img g-box">
				<img class="ui g-box-img image" src="" id="show-img">

			</div>

			<p>
				<button class="myhead ui mini teal basic  button" type="button">上一步</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<button class="ui red button" id="sc">保存上传</button>

			</p>


		</div>
	</div>

			<script>

               $(function () {
                   <!--点击按钮触发选择本地文件按钮-->
                   $('#my-img').click(function(){
                       $('#img-upload').click();
                   });

                   $('#sc').click(function(){//调用from表单中的submit提交按钮//这边的button就是submit
                       $('#sc1').click();
                   });
                  //参考 https://blog.csdn.net/xl_1803/article/details/82838408
                   <!--file文件内容发生改变的时候弹出另外窗口等操作-->
                   $('#img-upload').change(function(){

                       var img_id=$('#img-upload').val(); //根据id得到值
                       var index= img_id.lastIndexOf("."); //（考虑严谨用lastIndexOf(".")得到）得到"."在第几位
                       img_id=img_id.substring(index); //截断"."之前的，得到后缀

                       if(img_id!=".bmp"&&img_id!=".png"&&img_id!=".PNG"&&img_id!=".gif"&&img_id!=".jpg"&&img_id!=".jpeg"){  //根据后缀，判断是否符合图片格式
						   $('#tishi').text("不是指定图片格式,重新选择");
                       }else
                           {
                               //获取input file的files文件数组;
                               //$('#filed')获取的是jQuery对象，.get(0)转为原生对象;
                               //这边默认只能选一个，但是存放形式仍然是数组，所以取第一个元素使用[0];
                               var file = $('#img-upload').get(0).files[0];
                               //创建用来读取此文件的对象
                               var reader = new FileReader();
                               //使用该对象读取file文件
                               reader.readAsDataURL(file);
                               //读取文件成功后执行的方法函数
                               reader.onload=function(e){
                                   //读取成功后返回的一个参数e，整个的一个进度事件
                                   console.log(e);
                                   //选择所要显示图片的img，要赋值给img的src就是e中target下result里面
                                   //的base64编码格式的地址
                                   $('#show-img').get(0).src = e.target.result;

                               }
                               //打开另外显示图片的窗口
                               $('.ui.myhead2.modal').modal('show');


						   }

                   });
               });



               <!--修改个人信息点击事件-->
			$('.res').click(function()
		{
			$('.ui.res1.modal').modal('show');
		});
			
			$('.ui.dropdown')
  .dropdown({
    clearable: true
  });

               <!--点击修改头像-->
			$('.myhead').click(function ()
			{

                $('.ui.myhead1.modal').modal('show');
            });

               <!--点击取消,隐藏窗口-->
               $('.qux1').click(function()
               {
                   $('.ui.myhead1.modal').modal('hide');

               });
		
	</script>




	</body>
</html>
